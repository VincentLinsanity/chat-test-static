(this["webpackJsonpchat-test-vincent-client"]=this["webpackJsonpchat-test-vincent-client"]||[]).push([[0],{144:function(e,t,n){},151:function(e,t){},153:function(e,t){},164:function(e,t){},166:function(e,t){},193:function(e,t){},195:function(e,t){},196:function(e,t){},201:function(e,t){},203:function(e,t){},209:function(e,t){},211:function(e,t){},230:function(e,t){},242:function(e,t){},245:function(e,t){},250:function(e,t,n){},251:function(e,t,n){},261:function(e,t,n){"use strict";n.r(t);var c=n(142),s=n(19),r=(n(144),n(145)),a="uI2ooxtwHeI6q69PS98fx9SWVGbpQohO",o=n(0),i=n.n(o),u=n(141),j=n(2),l={},b=function(e){var t=e.username,n=e.roomname,i=Object(o.useState)(""),b=Object(s.a)(i,2),h=b[0],m=b[1],O=Object(o.useState)([]),d=Object(s.a)(O,2),f=d[0],x=d[1];Object(o.useEffect)((function(){console.log("init"),(l=u.a.connect("http://18.224.183.86:8000/chat",{transports:["websocket"]})).on("error",(function(e){console.log(e)})),l.on("connect",(function(){l.emit("joinRoom",{username:t,roomname:n})})),l.on("message",(function(e){var t=function(e,t){return e.startsWith("Welcome")||e.startsWith(t)?e:r.decrypt(a,e)}(e.text,e.username),n=f;n.push({userId:e.userId,username:e.username,text:t}),x(Object(c.a)(n))}))}),[]);Object(o.useEffect)((function(){v.current.scrollIntoView({behavior:"smooth"})}),[f]);var p=function(){if(""!==h){var e=function(e){return r.encrypt(a,e)}(h);l.emit("chat",e),m("")}},v=Object(o.useRef)(null);return Object(j.jsxs)("div",{className:"chat",children:[Object(j.jsx)("div",{className:"user-name",children:Object(j.jsxs)("h2",{children:[t," ",Object(j.jsxs)("span",{style:{fontSize:"0.7rem"},children:["in ",n]})]})}),Object(j.jsxs)("div",{className:"chat-message",children:[f.map((function(e,n){return e.username!==t?Object(j.jsxs)("div",{className:"message",children:[Object(j.jsx)("p",{children:e.text}),Object(j.jsx)("span",{children:e.username})]},n):Object(j.jsxs)("div",{className:"message mess-right",children:[Object(j.jsxs)("p",{children:[e.text," "]}),Object(j.jsx)("span",{children:e.username})]},n)})),Object(j.jsx)("div",{ref:v})]}),Object(j.jsxs)("div",{className:"send",children:[Object(j.jsx)("input",{placeholder:"enter your message",value:h,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&p()}}),Object(j.jsx)("button",{onClick:p,children:"Send"})]})]})},h=(n(250),n(56)),m=function(){var e=Object(o.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(o.useState)(""),a=Object(s.a)(r,2),i=a[0],u=a[1];return Object(j.jsxs)("div",{className:"homepage",children:[Object(j.jsx)("h1",{children:"Welcome to InlineChat"}),Object(j.jsx)("input",{placeholder:"Input your user name",value:n,onChange:function(e){return c(e.target.value)}}),Object(j.jsx)("input",{placeholder:"Input the room name",value:i,onChange:function(e){return u(e.target.value)}}),Object(j.jsx)(h.b,{to:"/chat/".concat(i,"/").concat(n),children:Object(j.jsx)("button",{onClick:function(){""!==n&&""!==i||(alert("username and roomname are must !"),window.location.reload())},children:"Join"})})]})},O=n(4),d=(n(251),function(){var e=Object(O.g)(),t=e.roomname,n=e.username;return Object(j.jsx)(i.a.Fragment,{children:Object(j.jsx)("div",{children:Object(j.jsx)(b,{username:n,roomname:t})})})}),f=function(){return Object(j.jsx)(h.a,{children:Object(j.jsxs)(O.c,{children:[Object(j.jsx)(O.a,{path:"/",element:Object(j.jsx)(m,{})}),Object(j.jsx)(O.a,{path:"/chat/:roomname/:username",element:Object(j.jsx)(d,{})})]})})},x=n(143),p=n(57),v=Object(p.a)({ProcessReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"PROCESS"===t.type?Object(x.a)({},t.payload):e}}),g=v,y=n(53),S=n.n(y),I=n(140),w=Object(p.b)(g);S.a.render(Object(j.jsx)(I.a,{store:w,children:Object(j.jsx)(f,{})}),document.getElementById("root"))}},[[261,1,2]]]);
//# sourceMappingURL=main.65af20af.chunk.js.map